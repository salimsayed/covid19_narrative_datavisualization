<html>
  <head>
    <script src='https://d3js.org/d3.v5.min.js'></script>
    <style> circle {fill: lightblue; stroke: black;} </style>
  </head>
<body onload='init()'>
<svg width=800 height=800>
</svg>
  
<script>

  async function init() {
    const data = await d3.csv('us_household_income_race.csv');
    console.log(data.length)
    var xs = d3.scaleBand().domain(d3.range(data.length)).range([0,750]).padding(0.1)
    var ys = d3.scaleLinear().domain([0,d3.max(data, d => d.medianIncome)]).range([0,750]);

    var dataDomain = data.map(function (d){ return d.race; })
    var colorScheme = d3.scaleOrdinal().domain(dataDomain).range(d3.schemeCategory10)

    d3.select("svg")
    .append("g").attr("transform","translate(50,50)")
    .selectAll().data(data).enter()
    .append("rect")
    .attr("x", function(d, i){return xs(i);})
    .attr("y", function(d){return 750-ys(d.medianIncome);})
    .attr("height", d => d.medianIncome)
    .attr("width", xs.bandwidth())
    .attr("fill", function(d){return colorScheme(d.race);} )


/*    d3.select("svg")
    .append("g").attr("transform","translate(50,50)")
    .call(d3.axisLeft(ys)
    .tickValues([10,20,50,100])
    .tickFormat(d3.format("~s"))
    )

    d3.select("svg")
    .append("g").attr("transform","translate(50,250)")
    .call(d3.axisBottom(xs)
    .tickValues([10,20,50,100])
    .tickFormat(d3.format("~s"))
    )*/
  }
</script>
  
</body>
</html>
